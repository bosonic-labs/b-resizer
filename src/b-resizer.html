<element name="b-resizer">
    <style>
        :host {
            position: absolute;
            background-color: #ccc;
        }

        :host[right] {
            top: 0px;
            right: 0px;
            width: 8px;
            height: 100%;
            cursor: col-resize;
        }

        .b-resizer-container {
            position: relative;
        }
    </style>
    <template>
        <div class="b-resizer-handle"></div>
    </template>
    <script>
        ({
            createdCallback: function() {
                this.parentNode.classList.add('b-resizer-container');

                this.startListener = this.start.bind(this);
                this.addEventListener('mousedown', this.startListener, false);
            },

            start: function(e) {
                e.preventDefault();
                this.refreshPreviousPosition(e);
                this.resizeListener = this.resize.bind(this);
                this.stopListener = this.stop.bind(this);
                document.addEventListener('mousemove', this.resizeListener, false);
                document.addEventListener('mouseup', this.stopListener, false);
            },

            resize: function(e) {
                var x = e.pageX,
                    xdiff = x - this.previousPosition.x;

                this.updateSize(this.parentNode, 'width', xdiff);
                
                this.refreshPreviousPosition(e);
            },

            refreshPreviousPosition: function(e) {
                this.previousPosition = { x: e.pageX, y: e.pageY };
            },

            getSize: function(node, dimension) {
                return parseInt(node.getBoundingClientRect()[dimension]);
            },

            setSize: function(node, dimension, size) {
                node.style[dimension] = size + 'px';
            },

            updateSize: function(node, dimension, diff) {
                var currentSize = this.getSize(node, dimension);
                this.setSize(node, dimension, currentSize + diff);
            },

            stop: function(e) {
                document.removeEventListener('mousemove', this.resizeListener, false);
                document.removeEventListener('mouseup', this.stopListener, false);
            }
        });
    </script>
</element>